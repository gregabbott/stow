<!-- Merged 2025_05_13 -->
<html lang="en"><head><meta charset="UTF-8"><meta name="color-scheme" content="light dark"><link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiICB4PSIwIiB5PSIwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj4KICA8c3R5bGU+LmF7CmZpbGw6IzI1MjUyNTsKZm9udC1mYW1pbHk6VmVyZGFuYTsKdGV4dC1hbmNob3I6bWlkZGxlOwp9PC9zdHlsZT4KICA8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI0ZGRiIvPjx0ZXh0IGNsYXNzPSJhIiBmb250LXNpemU9IjY4cHgiIHg9IjEwMCIgeT0iMTE2Ljg3NSI+U3RvdzwvdGV4dD48L3N2Zz4="><style>/* frame.css */
:root {color-scheme: light dark;--light: hsl(0, 0%, 100%);--dark: hsl(0, 0%, 0%);--accent: #8e70f7;--bg: light-dark(var(--light), var(--dark));--fg: light-dark(var(--dark), var(--light));--brd: 1px solid var(--fg);--rad: 1lh;--bs0: inset 0 0 0 .5px var(--fg);--bs: inset 0 0 0 1px var(--fg);--bs2: inset 0 0 0 2px var(--fg);accent-color: var(--fg);}* {margin: 0;padding: 0;font-family: monospace;box-sizing: border-box;font-size: 15px;user-select: none;line-height: 100%;outline: none;border: none;}@media (prefers-color-scheme: light) {::-moz-selection {background-color: var(--dark);color:var(--light);}::selection{background-color: var(--dark);color: var(--light);}}@media (prefers-color-scheme: dark) {::-moz-selection{background-color: var(--light);color:var(--dark);}::selection{background-color: var(--light);color:var(--dark);}}a{color: var(--fg);}hr{height: 1lh;}#notice{background-color: var(--fg);color: var(--bg);position: fixed;width: 100%;bottom: 0lh;left: 0ch;padding: .5em 1ch;text-align: left;display: block;}table{border-collapse: collapse;}select {background-color: var(--bg);color: var(--fg);border: var(--brd);padding: 0;font-family: 15px;line-height: 2lh;height: 1lh;padding: 0 1ch;-webkit-appearance: none;-moz-appearance: none;appearance: none;}.faux_po_holder{width: fit-content;height: fit-content;display: block;position: absolute;z-index: 4;}.faux_po_content {box-shadow: var(--bs);outline: var(--brd);outline-offset: -1px;background: var(--bg);overflow: hidden;position: fixed;}#row_actions_po,#column_actions_po{.faux_po_content{margin: -.5px !important;padding: 0;width: 16ch;button {box-shadow: none;width: 100%;text-align: left;&:hover {background: var(--fg);color: var(--bg);}}max-height: calc(100dvh - 2lh);overflow-y: auto;}}#column_type_po .faux_po_content{width: 64ch;padding: 1lh 1ch;select {width: 100%;}}#filter_popover .faux_po_content{top: 1lh;left: 1ch;display: flex;#filter_switch{padding: .5em 1ch;width: 6ch;text-align: right;}gap: 0ch;align-items: center;#filter_query{width:40ch}#filter_name{width: 40ch;}label{height: 2lh !important;min-height: 2lh;position: relative;display: flex;align-items: center;gap: 1ch;width: 100%;box-shadow: var(--bs0);&:active,&:focus-within{b{font-weight: bold;}}b{width: 6ch;text-align: right;font-weight: normal;}padding: 0 1ch;input{padding: 0;box-shadow: none;}}}.faux_po_backdrop {position: fixed;top: 0;left: 0;background: var(--accent);opacity: 0.0;height: 100dvh;width: 100dvw;display: block;}.full_viewport_notice {position: fixed;background-color: var(--bg);color: var(--fg);padding: 2ch;top: 0;left: 0;height: 100dvh;width: 100dvw;z-index: 999;display: flex;flex-direction: column;align-items: center;justify-content: center;text-align: center;}:popover-open,dialog:open {display: flex;flex-direction: column;}[popover],dialog {outline: 2px solid var(--fg);outline-offset: 0px;border: none;left: 3ch;top: 2lh;padding: 2lh 3ch;max-height: calc(100dvh - 4lh);background-color: var(--bg);z-index: 9999;width: 64ch;max-width: calc(100dvw - 2ch);}.disabled {pointer-events: none;opacity: .5;}button,input {margin: 0;border: none;}input {padding: 0 1ch;background-color: transparent;height: 2lh;&[type="search"] {box-shadow: var(--bs);}outline: 0;&:focus {box-shadow: inset 0 0 0 2px var(--fg);}}button,.button {padding: 0 1ch;display: flex;align-items: center;box-shadow: inset 0 0 0 1px var(--fg);height: 2lh;background-color: var(--bg);color: var(--fg);border: none;&:active {background: var(--fg);color: var(--bg);}}html,body {height: 100dvh;max-height: 100dvh;margin: 0;}body {color: var(--fg);background-color: var(--bg);display: flex;flex-direction: column;padding: 1lh 1ch;}main {display: flex;flex-grow: 1;overflow: hidden;}#menu_items {display: flex;flex-direction: column;}.new_column_strip {position: absolute;display: block;height: 100dvh;right: -1px;z-index: 999;width: 2px;background-color: var(--fg);cursor: pointer;}::-webkit-scrollbar {font-family: monospace;width: 1ch;height: 1lh;cursor: pointer;background-color: transparent;}::-webkit-scrollbar-thumb {background: transparent;border-radius: 0;box-shadow: inset 0 0 0 1px var(--fg);border: none;}::-webkit-scrollbar-track,::-webkit-scrollbar-corner {background: transparent;}.grid {background-image:linear-gradient(to right,hsla(0, 0%, 50%, 0.1) 1px,transparent 1px),linear-gradient(to bottom,hsla(0, 0%, 50%, 0.1) 1px,transparent 1px);background-size: 1ch 1lh;background-position: -.5px -.5px;}.grid_dots {background-image:radial-gradient(circle at 0 0, var(--fg) .5px, transparent 0),radial-gradient(circle at 100% 0, var(--fg) .5px, transparent 0),radial-gradient(circle at 0 100%,var(--fg) .5px, transparent 0),radial-gradient(circle at 100% 100%, var(--fg) .5px, transparent 0);background-size: 1ch 1lh;background-position: 0 0, 0 0, 0 0, 0 0;}nav {display: flex;min-height: 2lh;gap: 1ch;margin-bottom: 1lh;.grow {flex-grow: 1;}}g-db {height: 100%;width: 100%;display: flex;flex-direction: column;#table_holder {display: flex;align-items: start;flex-direction: column;flex: 0 1 auto;overflow-x: scroll;overflow-y: scroll;position: relative;width: 100%;height: 100%;background-color: transparent;max-width: 100%;padding: 0 1ch 50dvh 0;table {box-sizing: border-box;margin: 0;padding: 0;flex-grow: 0;width: auto;height: auto;display: table;table-layout: auto;border-collapse: collapse;border-spacing: 0;border: none;position: relative;&::after{content: "";position: absolute;top: .5px;left: .5px;outline-offset: -.5px;display: block;width: calc(100% - .5px);height: calc(100% - .5px);z-index: 3;outline: 1px solid var(--fg);pointer-events: none;}caption {background: var(--bg);outline: 1px dashed var(--fg);outline-offset: -.5px;padding: .5em 1ch;}caption,thead{top: 0;position: sticky;z-index: 3;}th {width: 6ch;min-width: 6ch;max-width: 6ch;text-align: right;font-weight: normal;}th,td {background-color: var(--bg);outline: 1px dashed var(--fg);outline-offset: -.5px;height: 2lh;vertical-align: top;padding:calc(.5em)calc(1ch);line-height:1em;position: relative;min-width: calc(3ch - 1px);max-width: 66ch;}td{&:hover, &.selected {z-index: 1;outline-style: solid;outline-width: 1.5px;}}thead {top:2lh;&::after{width: 100%;height: 1px;position: absolute;z-index: 1;bottom: -0.5px;content: "";left: 0;display: block;background-color: var(--fg);}th,td{background-color: var(--bg);}tr:first-of-type td {cursor: context-menu;}}tbody {background-color: #8e70f7;counter-reset: row;input[type="checkbox"] {max-height: 1ch;max-width: 1ch;border: none;}tr {counter-increment: row;th:first-of-type {text-align: right;&::after {box-sizing: border-box;content: counter(row);}}&.selected>th:first-of-type::after {content: counter(row);width: calc(100%);height: 100%;padding: .5em 1ch;border-left: 1ch solid var(--fg);position: absolute;left: 0;top: 0;}th:first-of-type {cursor: context-menu;}}}}}}#db_thead tr:first-of-type td:hover::before,[title]::before,[data-t]::before{position: fixed;bottom: 0px;font-weight: normal;left: 1ch;display: flex;width: 100dvw;height: 2lh;background: var(--bg);color: var(--fg);text-align: left;text-transform:none;align-items: center;justify-content: left;z-index: 9999;}#db_thead tr:first-of-type td:hover::before{content: attr(data-note);}[data-t]:hover::before{content: attr(data-t);}[title]:hover::before{content: attr(title);}#filter_row td[title]{background-color: var(--fg);color: var(--bg);}#filter_row td[title]::after{position: absolute;content: attr(title);white-space: nowrap;max-width: calc(100% - 2ch);left: 1ch;overflow: hidden;text-overflow: ellipsis;}.x,.y {display: flex;gap: 1ch;}x{align-content: center;}.y{flex-direction: column;}#compact_mode:checked ~ * {label[for="compact_mode"]{box-shadow: var(--bs2);}thead {top:1lh;}caption {padding: 0em 1ch;}#db_table tr {th, td {padding: 0em 1ch;height: 1lh;}&.selected>th:first-of-type::after {padding-top: 0;}}}body:has(:popover-open) {#hide_popover {display: block;}}::backdrop {opacity: 0;}#hide_popover{z-index: 99;display: none;background: var(--dark);opacity: 0;width: 100dvw;content: "";height: 100dvh;position: fixed;top: 0;left: 0;}.hide {display: none !important;}#prompt_po {padding: 0;p{padding: .5em 1ch;border-bottom: 1px dashed var(--fg);}input {box-shadow: none;border-bottom: var(--brd);width: 100%;}.x {gap: 0;button {width: 16ch;outline: var(--brd);box-shadow: none;&:hover{font-weight: bold;}text-align: center;}padding: 0lh 0ch;}}#main_menu_po {padding: 0;overflow: hidden;#menu_items_searcher {width: 100%;display: block;padding: 1ch;box-shadow: none;border-bottom: var(--brd);}footer {border-top: var(--brd);min-height: 2lh;display: flex;align-items: center;padding: 0 1ch;text-align: center;}#menu_items {max-height: 50dvh;overflow-y: auto;&::-webkit-scrollbar {width: 2ch;height: 1ch;cursor: pointer;}&::-webkit-scrollbar-thumb {background: var(--bg);border-radius: 0;box-shadow: inset 0 0 0 1px var(--fg);border: none;border-right: 1ch solid var(--bg);}gap: 0;div {display: flex;align-items: center;min-height: 2lh;padding: 0 1ch;border: 1px dotted transparent;border-left: none;border-right: none;&:hover {border-color: var(--fg);}input {display: none;padding: 0;margin: 0;}&:has(input:checked) {font-weight: bold;}button {all: unset;cursor: default;padding: 0;height: auto;border: none;&:hover,&:focus {box-shadow: none;outline-color: transparent;}&:active {background-color: var(--bg);color: var(--fg);}}}}}#file_load_stored {box-shadow: inset 0 0 0 2px var(--fg);&:focus,&:hover {outline: none;background: var(--fg);color: var(--bg);}}</style><style id="column_styles"></style><!-- STOW. By + copyright 2025 Greg Abbott--><title>Stow</title></head><body class="grid"><input type="checkbox" id="compact_mode" hidden=""><div popover="" id="po_license"><p>Name: <span data-t="To carefully and neatly arrange and pack items in a compact mass, and store them in their proper place">Stow</span><br>
Version: 2025_0513 <i>(Under Development)</i><br>
View: <a href="log.html">Change Log</a><br>
By: <a href="https://gregabbott.pages.dev/">Greg Abbott</a></p><hr><p>LICENSE<br>
© 2025 Greg Abbott. All rights reserved.</p><p>NO WARRANTY<br>
THE SOFTWARE IS PROVIDED "AS IS",
WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE
AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE
FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</p></div><noscript><div class="full_viewport_notice"><p>This tool requires JavaScript<br><a href="https://gregabbott.pages.dev/">View other tools</a></p></div></noscript><div id="unsupported_browser" class="full_viewport_notice hide"><div><p>Your browser doesn't support the File Access API.<br>
This tool uses it to edit local files.</p><p><a href="https://gregabbott.pages.dev/">View other tools</a></p></div></div><div id="main_menu_po" popover=""><input type="search" id="menu_items_searcher"><div id="menu_items"><div id="new_db"><input type="radio" name="mi"><button>New DB</button></div><div id="file_select"><input type="radio" name="mi"><button>Open File</button></div><div id="file_close"><input type="radio" name="mi"><button>Close File</button></div><div id="file_forget"><input type="radio" name="mi"><button>Forget File</button></div><div id="file_save"><input type="radio" name="mi"><button>Save File</button></div><div id="file_save_as"><input type="radio" name="mi"><button>Save As File</button></div><div id="show_po_license"><input type="radio" name="mi"><button>Read License</button></div><div id="copy_db_as_json"><input type="radio" name="mi"><button>Copy DB as JSON</button></div><div id="records_deselect_all"><input type="radio" name="mi"><button>Deselect all records</button></div></div><footer><div id="file_status"></div></footer></div><div id="filter_popover" class="faux_po_holder hide"><div id="filter_popover_hide" class="faux_po_backdrop"></div><div class="faux_po_content"><datalist id="filter_tokens"><option value="&quot;Is Blank&quot;"></option><option value="&quot;Not Blank&quot;"></option></datalist><div id="filter_switch" data-t="Click to toggle this filter on or off">Flip</div><input id="filter_query" list="filter_tokens" type="search"></div></div><div id="column_type_po" class="faux_po_holder hide"><div id="column_type_po_hide" class="faux_po_backdrop"></div><div class="faux_po_content"><p><span id="column_type_current_column_name"></span> data type:</p><select id="column_type_picker"><option data-t="Convert new input to the most likely type (Number, Boolean, Null, String)">any</option><option data-t="Keep new inputs as strings">string</option><option data-t="Convert new input to a number where possible (e.g. &quot;8&quot; -&gt; 8)">number</option><option data-t="Accept [true, false, null]">boolean</option></select></div></div><dialog id="file_dialog"><p id="file_dialog_message"></p><menu><button id="file_dialog_done_button">done</button></menu></dialog><div id="row_actions_po" class="faux_po_holder hide"><div id="row_actions_po_hide" class="faux_po_backdrop"></div><div class="faux_po_content"><div><button id="record_make_above">Make Above</button></div><div><button id="record_make_below">Make Below</button></div><div><button id="record_delete_all_ticked">Zap ticked rows</button></div><div><button id="record_delete_clicked">Zap row</button></div><div><button id="record_clone">Clone</button></div><div data-t="Copy row as JSON"><button id="record_copy_as_js_ob">Copy JSON</button></div></div></div><div id="column_actions_po" class="faux_po_holder hide"><div id="column_actions_po_hide" class="faux_po_backdrop"></div><div class="faux_po_content"><div><button id="column_rename" data-t="Rename this column">Name</button></div><div><button id="column_tweak_note">Note</button></div><div><button id="column_tweak_type">Type</button></div><div><button id="column_delete">Zap</button></div><div><button id="column_sort_a_z">Sort A-Z</button></div><div><button id="column_sort_z_a">Sort Z-A</button></div><div><button id="column_move_left">Move Left</button></div><div><button id="column_move_right">Move Right</button></div><div><button id="column_add_before">Add Left</button></div><div><button id="column_add_after">Add Right</button></div></div></div><div id="prompt_po" class="faux_po_holder hide"><div id="prompt_po_hide" class="faux_po_backdrop"></div><div class="faux_po_content"><p id="prompt_message"></p><input type="search" id="prompt_input" size="48"><div class="x"><button id="insert_date" data-t="Insert current date time stamp yyyy_MMdd_hhmm">Stamp</button><button id="prompt_button_yes" data-t="Apply">Keep</button><button id="prompt_button_no" data-t="Cancel">Shut</button></div></div></div><nav><button id="show_main_menu_po">Menu</button><div><label class="button" for="compact_mode" data-t="Toggle the table's vertical cell padding">Cram</label></div><div id="scroll_to_top" class="button hide" data-t="Scroll to top">Rise</div><button id="file_load_stored" data-t="Reopen remembered file from previous session">Reopen</button><div class="grow"></div><div id="facts"><span data-t="Current Saved Status" id="current_saved_status">Unsaved</span> | <span data-t="Records shown that match active filters">Hits <span id="record_facts_visible">N</span></span> | <span data-t="Records / rows in database">Rows <span id="record_facts_total">N</span></span></div><div id="notice" class="hide">Notice</div></nav><main><g-db><div id="table_holder"><table id="db_table"><caption id="db_name"></caption><thead id="db_thead"></thead><tbody id="db_tbody"></tbody></table></div></g-db></main><dialog id="confirm_dialog"><p id="confirm_message"></p><div id="confirm_buttons"><button id="confirm_button_no">No</button><button id="confirm_button_yes" autofocus="">Yes</button></div></dialog><div id="hide_popover"></div><script>/* 
j.js
 */
(()=>{const e=[...document.querySelectorAll('[id]:not([id=""])')].reduce(((e,t)=>(e[t.id.trim()]=t,e)),{});let t={};function n(){t.db={},t.record_els_matching_search_filters=[],t.menu_items_matching_search=[],t.selected_menu_item=null,t.column_active_index=null,t.row_clicked_for_row_menu=null,e.filter_row=null,t.records_selected=new Set,t.selected_cells=new Set,t.file_is_loaded=!1,t.has_unsaved_changes=!1,t.last_saved_content="",t.confirm_yes_fn=null,t.confirm_no_fn=null,t.prompt_yes_fn=null,t.prompt_no_fn=null,t.prompt_pending=!1}function o(e){return Array.from({length:e},(()=>""))}function l({clicked:e,str:t,pass_fn:n,fail_fn:o}){navigator.clipboard.writeText(t).then((()=>{n&&n()})).catch((e=>{o&&o()}))}function r(e){let t=new Set;e.forEach((e=>{Object.keys(e).forEach((e=>t.add(e)))}));let n={};return t.forEach((t=>{let o=[];e.forEach((e=>{o.push(void 0!==e[t]?e[t]:null)})),n[t]=o})),n}function i(){t.has_unsaved_changes=!0,e.current_saved_status.textContent="Unsaved",t.allow_auto_save=!0}function a(){t.has_unsaved_changes=!1,e.current_saved_status.textContent="Saved"}n();function c(e,t){let n=document.createElement(e);return t?t.appendChild(n):n}function s(e,t,n){return n?(n.addEventListener(e,t),n):n=>s(e,t,n)}function d(e="any",t){if("string"===e)return t;let n=(e=>{try{let t=JSON.parse(e);return null===t||!0===t||!1===t||"number"==typeof t?t:e}catch(t){return e}})(t);return"any"===e?n:0===t.trim().length||null===n?null:typeof n!==e?(ge(`Input "${t}" won't convert to column type '${e}'.`),t):n}function _(e=new Date){const t=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],n=["Y","M","d","h","m","s","u"].reduce(((n,o,l)=>{return n[o]=(e[r="get"+t[l]]()+("getMonth"===r)+"").padStart("getMilliseconds"===r?3:2,"0"),n;var r}),{});return n.c=n.Y.substring(0,2),n.y=n.Y.substring(2),n}function u(e=new Date){let t=_(e);return"Y_Md_hm".split("").map((e=>t[e]||e)).join("")}function f(){n(),e.db_name.innerHTML="",e.db_thead.innerHTML="",e.db_tbody.innerHTML=""}function m(){let n={},o={};t.record_els_matching_search_filters.length=0;let l=[...e.filter_row.querySelectorAll("td")].reduce(((e,t,l)=>{let r=t.column;if(!r.sift||null==r.find||0===r.find.length)return e;if('"Is Blank"'===r.find)return e.set(l,n),e;if('"Not Blank"'===r.find)return e.set(l,o),e;let i=r.find.toLowerCase();return e.set(l,i.split(" ")),e}),new Map);if(0===l.size)return e.db_tbody.querySelectorAll("tr").forEach(te),e.record_facts_visible.textContent=e.db_tbody.querySelectorAll("tr").length,void fe();e.db_tbody.querySelectorAll("tr").forEach((e=>{let r=!0,i=-1;for(const t of e.querySelectorAll("td"))if(i++,l.has(i))if(l.get(i)===n){if(t.textContent.trim().length>0){r=!1;break}}else if(l.get(i)===o){if(0===t.textContent.trim().length){r=!1;break}}else if(1===l.get(i).length){if(0==t.textContent.toLowerCase().includes(l.get(i)[0])){r=!1;break}}else{let e=t.textContent.toLowerCase().split(" ");if(!1===l.get(i).every((t=>e.some((e=>e.startsWith(t)))))){r=!1;break}}r?(t.record_els_matching_search_filters.push(e),te(e)):(ee(e),e.record.is_selected&&se(e.record))})),ie()}function p(n=""){let o={meta:t.db.meta,form:[],list:[]};return o.meta.last=u(),e.column_names.querySelectorAll("td").forEach((e=>{o.form.push(e.column)})),o.form=r(o.form),e.db_tbody.querySelectorAll("tr").forEach((e=>{let t=[];e.querySelectorAll("td").forEach((e=>{t.push(e.value)})),o.list.push(t)})),JSON.stringify(o,null,n)}function h(e){return e.name??="",e.note??="",e.type=function(e){let t="boolean",n="number",o="any",l="string",r=typeof e===l,i=(e,t)=>typeof e===l&&typeof t===l&&0!==e.length&&0!==t.length&&e.startsWith(t);return r&&(e=e.toLowerCase()),"*"===e||"a"===e||e===o||null===e?o:typeof e===t||"?"===e||"true"===e||"false"===e||i(t,e)?t:typeof e===n||i(n,e)?n:r?l:o}(e.type),void 0===e.sift&&(e.sift=1),1==e.sift&&(e.sift=1),0==e.sift&&(e.sift=0),e.find??="",e}function y(e){var n;e.form&&(null!==(n=e.form)&&"object"==typeof n&&!Array.isArray(n))&&(e.form=function(e){const t=Object.keys(e),n=Math.max(...Object.values(e).map((e=>e.length)));return Array.from({length:n},((n,o)=>t.reduce(((t,n)=>(t[n]=e[n][o]||null,t)),{})))}(e.form));let l=e.list?.[0]?.length;if(0===l&&e.form&&(l=e.form.length||0),l<1){let e="Input doesn't have expected data.\ne.g. {\"form\":{name:[c1v,c2v],…},\"list\":[['a1','b1,],…]}";return ge(e),void console.error(e)}if(null==e.form&&(e.form=[]),0==e.form.length||e.form.length<l)for(;e.form.length<l;)e.form.push({name:"",note:"",type:"any",sift:!1,find:""});var r;return null!=e.list&&0!==e.list.length||(e.list=[o(l)]),t.db.meta=(r=e.meta)?(void 0===r.name&&(r.name="Untitled DB"),void 0===r.made&&(r.made=u()),void 0===r.note&&(r.note=""),r):{name:"Untitled DB",note:"",made:u()},t.db.form=e.form.map(h),t.db.list=e.list.map((e=>({data:e}))),t.db}function w(e){if(!e||0===e.size)return null;for(const t of e)return t}function g(n){const o=n.target.closest("tr");o&&(t.row_clicked_for_row_menu=o,function(n){t.records_selected.size>1&&t.records_selected.has(t.row_clicked_for_row_menu.record)?(te(e.record_delete_all_ticked),ee(e.record_delete_clicked)):(ee(e.record_delete_all_ticked),te(e.record_delete_clicked));te(e.row_actions_po),A({event:n,element:e.row_actions_po.querySelector(".faux_po_content")})}(n))}function b(e){let t=c("tr");t.className="record";c("th",t);return e.data.forEach((e=>{let n=c("td",t);n.textContent=e,n.value=e})),t.record=e,Object.defineProperty(e,"is_selected",{get:()=>t.classList.contains("selected"),enumerable:!0,configurable:!0}),e.dom={row:t},e}function v(n,o=!1){let l=t.row_clicked_for_row_menu;return l||(l=w(t.selected_cells)?.parentNode),l?(e.db_tbody.insertBefore(n.dom.row,l),!1===o&&e.db_tbody.insertBefore(l,n.dom.row)):e.db_tbody.insertBefore(n.dom.row,e.db_tbody.firstChild),n}function k({above:t}){let n=b(function(){let t={data:[]};return e.filter_row.querySelectorAll("td").forEach((e=>{let n=e.column.find.trim();n.length>2&&'"'==n[0]&&n.endsWith('"')&&(n=""),t.data.push(n)})),t}());return v(n,t),i(),m(),de(n)?ge("Clear the active search to see the new record"):(ce(),_e(n)),n}function x(){let n=t.row_clicked_for_row_menu;n||console.log("record_copy_as_js_ob no row to act on");let o=[];n.querySelectorAll("td").forEach((e=>{o.push(e.value)}));let r=[];e.column_names.querySelectorAll("td").forEach(((e,t)=>{let n=o[t];"string"==typeof n&&(n=`"${n}"`),r.push(`"${e.column.name}":${n}`)})),l({str:`{\n${r.join(",\n")}\n}`,pass_fn:()=>ge("Copied row as JSON"),fail_fn:()=>ge("Failed to row as JSON")})}function S(){let e=t.row_clicked_for_row_menu;if(!e)return void ge("Select a record to clone then try again");let n={data:[]};e.querySelectorAll("td").forEach((e=>{n.data.push(e.value)})),n=b(n),v(n),ce(),_e(n),i()}s("click",(function(){l({str:p(" "),pass_fn:()=>ge("Copied DB as JSON"),fail_fn:()=>ge("Failed to copy DB as JSON")})}),e.copy_db_as_json),s("click",(async()=>{let e=!0;if(t.file_is_loaded){if(!await re.file_close())return;e=!1}pe({message:"Wanted column names (Comma Separate)",initial:"A,B,C",yes_fn:t=>{e&&f();let n=t.split(",");P(y({meta:{name:"Untitled Doc",made:u(),note:""},form:{name:n},list:[o(n.length)]}))},no_fn:()=>{ge('Cancelled "Make New DB"')},y_text:"Make",n_text:"Stop"})}),e.new_db),s("click",(function(n){const o=n.target.closest("tr");if(!o)return;let l=o.record;n.target===o.firstChild?g(n):t.records_selected.has(l)&&1===t.records_selected.size&&1===t.selected_cells.size&&n.target===w(t.selected_cells)?(!function(t){A({event:t,element:e.prompt_po.querySelector(".faux_po_content")})}(n),G()):(ce(),t.selected_cells.forEach((e=>{e.classList.remove("selected")})),t.selected_cells.clear(),_e(l),"TD"==n.target.tagName&&(r=n.target,t.selected_cells.add(r),r.classList.add("selected")));var r}),e.db_tbody);let C={};function E(){return e.column_names.querySelectorAll("td")[t.column_active_index].column}function A({event:e,element:t}){const{clientX:n,clientY:o}=e;let{offsetWidth:l,offsetHeight:r}=t;const i=window.innerWidth,a=window.innerHeight;let c=n+l+3>i,s=o+r+3>a,d=c?Math.max(n-l-3,0):n+3,_=s?Math.max(a-r-3,0):o+3,u=q(d,be,c),f=q(_,ve,s);t.style.left=u+"px",t.style.top=f+"px"}function q(e,t,n){return Math[n?"floor":"ceil"](e/t)*t}function T(n){t.column_active_index=function(e){let t=e.closest("tr").querySelectorAll("td"),n=-1;for(let o=0;o<t.length;o++)if(t[o]===e){n=o;break}return n}(n.target);n.target;let o=e.column_actions_po;te(o),A({event:n,element:o.querySelector(".faux_po_content")})}function L(){let t=[];e.column_names.querySelectorAll("td").forEach(((e,n)=>{const o=n+1;"number"===e.column.type&&t.push(`\n        #db_table td:nth-of-type(${o}) {\n          text-align: right;\n        }\n      `)})),e.column_styles.innerHTML=t.join("\n")}C.move=(n,o)=>{let l="left"===n,r=!l;if(l&&0==t.column_active_index)ge("Already left-most");else if(r&&t.column_active_index===e.column_names.querySelectorAll("td").length-1)ge("already right-most");else{let a=t.column_active_index+r;function i(e){let t=e.querySelectorAll("td")[a];e.insertBefore(t,t.previousElementSibling)}e.db_thead.querySelectorAll("tr").forEach(i),e.db_tbody.querySelectorAll("tr").forEach(i)}o&&o()},C.tweak_type=()=>{let t=E(),n=t.name.trim();e.column_type_current_column_name.textContent=n.length<1?'"Untitled Column"':`"${n}"`,e.column_type_picker.value=t.type,te(e.column_type_po)},s("input",(()=>{E().type=e.column_type_picker.value,L()}),e.column_type_picker),s("click",(t=>{ee(e.column_type_po)}),e.column_type_po_hide),s("click",(t=>{ee(e.prompt_po)}),e.prompt_po_hide),C.tweak_note=()=>{let n=e.column_names.querySelectorAll("td")[t.column_active_index],o=n.column,l=prompt(`Tweak Note "${o.note}"`,o.note);null===l?ge('User cancelled "Rename Column"'):(n.dataset.note=l,o.note=l)},C.rename=()=>{let n=e.column_names.querySelectorAll("td")[t.column_active_index],o=n.textContent;pe({message:`Rename Column "${o}"`,initial:o,yes_fn:e=>{n.column.name=e,n.textContent=e},no_fn:()=>{ge('User cancelled "Rename Column"')}})},C.sort=n=>{confirm("Sort Column\n(No 'undo' available afterwards)")&&function(e,t,n){const o=new Intl.Collator("en",{sensitivity:"base"}),l=function(e){return e.querySelectorAll("td")[t].textContent.trim()},r=Array.from(e.rows).slice().sort((function(e,t){var r=o.compare(l(e),l(t));return"a-z"===n?r:-r})),i=document.createDocumentFragment();r.forEach((function(e){i.appendChild(e)})),e.appendChild(i)}(e.db_tbody,t.column_active_index,n)},C.delete=()=>{e.db_thead.querySelectorAll("tr:first-child td").length<2?ge("Table needs at least 1 Data Column"):ye({text:"Delete column and all data in it (permanent)",yes_fn:()=>{let n=null;function o(e){let o=e.querySelectorAll("td")[t.column_active_index];null===n&&(n=o.column),o.remove()}e.db_thead.querySelectorAll("tr").forEach(o),e.db_tbody.querySelectorAll("tr").forEach(o),m(),function({element:e,array:t}){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}({element:n,array:t.db.form}),ge('"Deleted Column"')},no_fn:()=>ge('Cancelled "Delete Column"')})},C.add=n=>{let o="after"===n,l="before"===n,r=null,i=null;t.column_active_index;let a={name:"",note:"",type:"any",sift:!1,find:""};function s(e){return n=>{var s;i=e?n.make_new_cell(a):c("td"),r=n.querySelectorAll("td")[t.column_active_index],l?n.insertBefore(i,r):o&&(s=i,r.insertAdjacentElement("afterend",s))}}t.db.form.push(a),e.db_thead.querySelectorAll("tr").forEach(s(!0)),e.db_tbody.querySelectorAll("tr").forEach(s(!1))},s("click",(function(t){if(ee(e.column_actions_po),"BUTTON"!==t.target.tagName)return;let n=C,o={column_add_before:()=>n.add("before"),column_add_after:()=>n.add("after"),column_move_left:()=>n.move("left"),column_move_right:()=>n.move("right"),column_delete:n.delete,column_sort_a_z:()=>n.sort("a-z"),column_sort_z_a:()=>n.sort("z-a"),column_rename:n.rename,column_tweak_note:n.tweak_note,column_tweak_type:n.tweak_type}[t.target.id];o&&(o(),ke(),L())}),e.column_actions_po),s("click",(function(t){if(ee(e.row_actions_po),"BUTTON"!==t.target.tagName)return;let n={record_make_above:()=>k({above:!0}),record_make_below:()=>k({above:!1}),record_delete_all_ticked:Z,record_delete_clicked:Q,record_clone:S,record_copy_as_js_ob:x}[t.target.id];n&&(n(),ie())}),e.row_actions_po);const D={};function N(){let n=t.current_filter_cell;n.column.find=e.filter_query.value.trim(),M(n),ce(),m(),fe()}function z(){t.current_filter_cell.classList.remove("selected"),t.current_filter_cell=null,ee(e.filter_popover)}function M(e){let t,n=e.column;t=n.sift&&n.find.length>0?n.find:"",t?e.title=t:e.removeAttribute("title")}function B(n){let o=n.target;t.current_filter_cell=o,t.current_filter_cell.classList.add("selected"),te(e.filter_popover),A({event:n,element:e.filter_popover.querySelector(".faux_po_content")}),e.filter_query.focus(),e.filter_switch.textContent=o.column.sift?"Doze":"Wake",e.filter_query.value=o.column.find}function O(){if(1!==t.selected_cells?.size)return void ge('If you select a cell, "F" key opens the column filter');let n=w(t.selected_cells),o=[...n.parentNode.querySelectorAll("td")].indexOf(n);e.filter_row.querySelectorAll("td")[o].click()}function P(n){e.db_thead.innerHTML="",e.db_tbody.innerHTML="",function(t){e.db_name.textContent=t.meta.name,e.db_name.meta=t.meta,e.db_name.onclick=()=>{pe({message:"Rename DB",initial:e.db_name.meta.name,yes_fn:t=>{t=t.trim(),e.db_name.textContent=t,e.db_name.meta.name=t},no_fn:()=>{ge("Cancelled rename DB")}})}}(n),D.name(n),L(),D.find(n),function(t){const n=document.createDocumentFragment();t.forEach((e=>n.appendChild(e.dom.row))),e.db_tbody.innerHTML="",e.db_tbody.appendChild(n)}(n.list.map((e=>b(e)))),function(){let e=ue();if(0==e.length||0==e.size)return;let n=null;if(0===t.records_selected.size)n=e[0];else{let t=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(e,(e=>e.record.is_selected));n=t==e.length-1?e[0]:e[t+1]}ce(),_e(n.record),ae(n.record.dom.row),n.record}(),m(),ie(),ke()}function F(e){return Array.isArray(e)}function j(e){return["INPUT","BUTTON","SELECT","TEXTAREA"].includes(e.tagName)}function W(e){function t(e){j(e)?e.disabled=!0:e.classList.add("disabled")}F(e)?e.forEach(t):t(e)}function $(e){function t(e){j(e)?e.disabled=!1:e.classList.remove("disabled")}F(e)?e.forEach(t):t(e)}function R(){0==e.menu_items_searcher.value.trim().length?(e.menu_items_searcher.blur(),e.main_menu_po.hidePopover()):(e.menu_items_searcher.value="",e.menu_items_searcher.focus(),J())}function H(){e.main_menu_po.showPopover(),e.menu_items_searcher.focus()}D.name=t=>{let n=c("tr",e.db_thead);e.column_names=n;c("th",n);n.make_new_cell=e=>{let t=c("td",n);return t.dataset.note=e.note,t.column=e,t.textContent=e.name,t.onclick=T,t},t.form.forEach(n.make_new_cell)},s("input",N,e.filter_query),s("click",(()=>{let n=t.current_filter_cell,o=!n.column.sift;n.column.sift=o?1:0,e.filter_switch.textContent=o?"Doze":"Wake",N()}),e.filter_switch),s("click",z,e.filter_popover_hide),D.find=t=>{let n=c("tr",e.db_thead);n.id="filter_row",e.filter_row=n;let o=c("th",n);o.textContent="Find",o.dataset.t="Show rows whose columns contain these values",n.make_new_cell=e=>{let t=c("td",n);return t.column=e,M(t),t.onclick=B,t},t.form.forEach(n.make_new_cell)},s("input",J,e.menu_items_searcher),s("click",(t=>{e.main_menu_po.hidePopover()}),e.menu_items),s("click",(function(){e.po_license.showPopover()}),e.show_po_license),s("click",H,e.show_main_menu_po),s("focus",(()=>{J()}),e.menu_items_searcher);let U=[...e.menu_items.getElementsByTagName("DIV")].map((e=>{let t={dom:e,dom_text:e.textContent.toLowerCase().trim()};return t.words=t.dom_text.split(/\s+/),t}));function J(){let n=e.menu_items_searcher.value.toLowerCase().trim();function o(e){t.menu_items_matching_search.push(e),te(e.dom)}if(t.menu_items_matching_search.length=0,t.selected_menu_item=null,0==n.length)U.forEach((e=>{!e.dom.classList.contains("disabled")?o(e):ee(e.dom)}));else{let e=n.split(/\s+/);e.length;U.forEach((t=>{let n=!t.dom.classList.contains("disabled"),l=(r=t.words,e.every((e=>r.some((t=>t.startsWith(e))))));var r;n&&l?o(t):ee(t.dom)}))}I()}function Y(e){e.dom.querySelector("input").checked=!0,t.selected_menu_item=e}function I(){let e=t.menu_items_matching_search.length>0?t.menu_items_matching_search:U;if(0===e.length)return;let n=e.indexOf(t.selected_menu_item),o=e.length-1==n?0:n+1;n!==o&&(Y(e[o]),ae(t.selected_menu_item.dom))}function K(){let e=t.menu_items_matching_search.length>0?t.menu_items_matching_search:U;if(0===e.length)return;let n=e.indexOf(t.selected_menu_item),o=n<1?e.length-1:n-1;n!==o&&(Y(e[o]),ae(t.selected_menu_item.dom),ae(t.selected_menu_item.dom))}function X(e){e.preventDefault(),t.selected_menu_item&&(e.target.blur(),e.target.value="",t.selected_menu_item.dom.click())}function G(){if(1!==t.selected_cells?.size)return void ge('If you select a cell, "Enter" key will start edit mode');let n=w(t.selected_cells);pe({initial:n.value,yes_fn:t=>{let o=n.parentNode,l=function(t,n){let o=[...n.querySelectorAll("td")].indexOf(t);return e.column_names.querySelectorAll("td")[o].column}(n,o);t=t.trim(),n.textContent=t,n.value=d(l.type,t),m(),_e(o.record),i()},no_fn:()=>{ge("Cancelled editing cell")}})}function V(e){e.dom.row.remove(),t.records_selected.delete(e)}function Q(){V(t.row_clicked_for_row_menu.record)}function Z(){let e=t.records_selected.size;ye({text:`Delete ${e} ticked rows?`,yes_fn:()=>{t.records_selected.forEach(V),m(),i(),ge(`Deleted ${e} rows`)},no_fn:()=>ge('Cancelled "delete ticked rows"')})}function ee(e){e.classList.add("hide")}function te(e){e.classList.remove("hide")}const ne=(()=>{const e="handles",t="2025_0506";let n=null;const o={open_db:()=>new Promise(((t,o)=>{const l=indexedDB.open("fileHandleDB",1);l.onupgradeneeded=t=>{const n=t.target.result;n.objectStoreNames.contains(e)||n.createObjectStore(e,{keyPath:"id"})},l.onsuccess=e=>{n=e.target.result,t()},l.onerror=e=>o(e.target.error)}))},l=(t,o)=>new Promise(((l,r)=>{const i=o(n.transaction(e,t).objectStore(e));i.onsuccess=()=>l(i.result),i.onerror=e=>r(e.target.error)}));return o.save_handle=(e,n)=>l("readwrite",(o=>o.put({id:t,handle:e,name:n}))),o.load_handle=()=>l("readonly",(e=>e.get(t))),o.delete_handle=()=>l("readwrite",(e=>e.delete(t))),o})(),oe=async(e,t="readwrite")=>{const n={mode:t};return"granted"===await e.queryPermission(n)||"granted"===await e.requestPermission(n)},le=t=>{e.file_status.textContent=t};s("click",(()=>{e.file_dialog.close()}),e.file_dialog_done_button),window.addEventListener("beforeunload",(e=>{t.has_unsaved_changes&&e.preventDefault()}));const re={};re.update_file_buttons=async()=>{const n=await ne.load_handle();[e.file_forget,e.file_save,e.file_close].forEach(n?$:W),n&&!t.file_is_loaded?(te(e.file_load_stored),e.file_load_stored.textContent=`Load "${n.name}"`,e.file_load_stored.focus(),W(e.file_close)):(ee(e.file_load_stored),$(e.file_close))},re.load_editor=async(n,o=null)=>{if(await re.file_close(),f(),le("Reading file..."),!await oe(n,"read"))throw Error("Read permission denied");const l=await n.getFile();let r=l.type.startsWith("application/json"),i=l.type.startsWith("application/gzip")||l.type.startsWith("application/x-gzip");if(!(r||i))return c="Not JSON / Gzipped JSON file",e.file_dialog_message.textContent=c,void e.file_dialog.showModal();var c;let s;if(r&&(s=await l.text()),i){const e=await l.arrayBuffer();s=await async function(e){let t=e;e instanceof ArrayBuffer&&(t=new Blob([e]));const n=t.stream().pipeThrough(new DecompressionStream("gzip")),o=await new Response(n).blob();return await function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=n,o.readAsText(e)}))}(o)}(e)}!function(e){if(!e)return console.log("No data stored to restore");P(y(JSON.parse(e)))}(s),a(),t.file_is_loaded=!0,o&&le(`Loaded "${o}"`),await re.update_file_buttons()},re.save_content=async(e,n)=>{const o=performance.now();if(!await oe(e))throw Error("Write permission denied");const l=await e.createWritable();let r=p("");if(n.endsWith(".gz")){const e=new TextEncoder,t=new ReadableStream({start(t){t.enqueue(e.encode(r)),t.close()}}).pipeThrough(new CompressionStream("gzip"));await t.pipeTo(l)}else await l.write(r),await l.close();le("File saved successfully. "+function(e){return"Took "+function(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),o=t%60;if(0===n)return o+"s";return`${n}m ${o}s`}(performance.now()-e)}(o)),t.file_is_loaded=!0,a()},re.file_save=async()=>{const e=await ne.load_handle();if(!e)return re.file_save_as();await oe(e.handle)||le("Permission denied."),await re.save_content(e.handle,e.name),await re.update_file_buttons()},re.file_save_as=async()=>{const e=await window.showSaveFilePicker({suggestedName:u()+".gz",types:[{description:"JSON",accept:{"application/json":[".json"]}},{description:"Gzip Compressed File",accept:{"application/gzip":[".gz"],"application/x-gzip":[".gz"]}}]});if(!await oe(e))return le("Permission denied.");const t=await e.getFile();await ne.save_handle(e,t.name),await re.save_content(e,t.name),await re.update_file_buttons()},re.file_select=async()=>{const[e]=await window.showOpenFilePicker();le("Saving file handle...");const t=(await e.getFile()).name;await ne.save_handle(e,t),await re.load_editor(e,t)},re.file_load_stored=async()=>{if(!await re.file_close())return;const e=await ne.load_handle().catch((e=>{console.log(e.message),console.log("Possibilities:\n- Tool hasn't setup the indexedDB (idb) yet\n- idb has no file stored to re-open\n- tool tried to open file before user page interaction")}));e&&(await oe(e.handle,"read")||le("Permission not granted."),await re.load_editor(e.handle,e.name))},re.file_close=async()=>!(t.has_unsaved_changes&&!confirm("You have unsaved changes. Close anyway?"))&&(f(),le("File closed. Handle remains."),await re.update_file_buttons(),!0),re.file_forget=async()=>{!await re.file_close()||(await ne.delete_handle(),le("Handle Forgotten."),await re.update_file_buttons())};function ie(){let t=e.db_tbody.querySelectorAll("tr"),n=e.db_tbody.querySelectorAll("tr.hide");e.record_facts_visible.textContent=t.length-n.length,e.record_facts_total.textContent=t.length}function ae(e){const t=e.getBoundingClientRect(),n=e.parentNode,o=n.getBoundingClientRect();let l=t.top<o.top;t.bottom>o.bottom?n.scrollTop+=t.bottom-o.bottom:l&&(n.scrollTop+=t.top-o.top)}function ce(){t.records_selected.forEach(se),t.records_selected.clear()}function se(e){if(!e)return console.log("pass deselect_row a record");e.dom.row.classList.remove("selected"),t.records_selected.delete(e)}function de(e){return e.dom.row.classList.contains("hide")}function _e(e){return e?!de(e)&&(t.records_selected.add(e),e.dom.row.classList.add("selected"),e):(console.log("pass select_row_if_not_hidden a record"),!1)}function w(e){return e.values().next().value}function ue(){let n=t.record_els_matching_search_filters;return n.length>0?n:e.db_tbody.children}function fe(){let e=ue();0!==e.length&&_e(e[0].record)}function me(e){e.preventDefault();let t=e.target;if(0===t.value.length)return he();t.value="",t.focus()}function pe({message:n,initial:o,yes_fn:l=null,no_fn:r=null,y_text:i="Apply",n_text:a="Exit"}){t.prompt_pending=!0,n?(e.prompt_message.textContent=n,te(e.prompt_message)):ee(e.prompt_message),t.prompt_yes_fn=l,t.prompt_no_fn=r,e.prompt_input.value=o,te(e.prompt_po),e.prompt_input.focus(),e.prompt_button_no.textContent=a,e.prompt_button_yes.textContent=i}function he(){t.prompt_pending=!1,ee(e.prompt_po),t.prompt_no_fn&&(t.prompt_no_fn(),t.prompt_no_fn=null),e.prompt_input.value=""}function ye({text:n="",yes:o="Yes",no:l="No",yes_fn:r,no_fn:i}){r||console.warn("Pass confirm a yes_fn"),t.confirm_yes_fn=r,t.confirm_no_fn=i,e.confirm_message.textContent=n,e.confirm_button_yes.textContent=o,e.confirm_button_no.textContent=l,e.confirm_dialog.showModal(),e.confirm_button_yes.focus()}s("click",ce,e.records_deselect_all),s("keydown",(function(n){if(n.ctrlKey||n.shiftKey||n.metaKey)return;let o;if(document.activeElement==e.menu_items_searcher)o={Escape:R,Enter:X,ArrowDown:I,ArrowUp:K}[n.key];else if(document.activeElement===e.prompt_input)o={Enter:()=>e.prompt_button_yes.click(),Escape:me}[n.key];else if(null!==t.current_filter_cell&&void 0!==t.current_filter_cell)o={Escape:z,Enter:z}[n.key];else{if(null!==document.querySelector("dialog[open]")||null!==document.querySelector(":popover-open"))return;o={"/":H,n:k,f:O,Enter:G}[n.key]}o&&(n.preventDefault(),o(n))}),window),s("click",(()=>{let t=u(),n=e.prompt_input,o=n.value.trim();0!=o.length?n.value=o+" "+t:n.value=t}),e.insert_date),s("click",he,e.prompt_button_no),s("click",(function(){t.prompt_pending=!1,ee(e.prompt_po),t.prompt_yes_fn&&(t.prompt_yes_fn(e.prompt_input.value),t.prompt_yes_fn=null),e.prompt_input.value=""}),e.prompt_button_yes),s("click",(()=>{t.prompt_pending&&he()}),e.hide_popover),s("click",(()=>{e.confirm_dialog.close(),t.confirm_yes_fn&&(t.confirm_yes_fn(),t.confirm_yes_fn=null)}),e.confirm_button_yes),s("click",(()=>{e.confirm_dialog.close(),t.confirm_no_fn&&(t.confirm_no_fn(),t.confirm_no_fn=null)}),e.confirm_button_no);let we=null;function ge(t){e.notice.textContent=t,te(e.notice),we=setTimeout((()=>ee(e.notice)),3e3)}s("load",(async function(){"showOpenFilePicker"in window&&"showSaveFilePicker"in window?(await(async()=>{await ne.open_db(),await re.update_file_buttons();const t=await ne.load_handle();le(t?`Stored file reference found: "${t.name}"`:"No stored file reference. Open or Save As to begin."),["file_select","file_load_stored","file_close","file_forget","file_save","file_save_as"].forEach((t=>{e[t].onclick=re[t]}))})(),await re.update_file_buttons(),t.file_is_loaded||P(y({meta:{name:"Demo Database",made:u(),note:"An example database showing some shortcuts"},form:r([{name:"Press",note:"Keyboard shortcut",type:"string",find:"",sift:1},{name:"Action",note:"What the shortcut does",type:"string",find:"",sift:1},{name:"Tag",note:"Relates to",type:"string",find:"",sift:1}]),list:[["n","Make","Row"],["f","Filter","Column"],["/","Open menu","Tool"],["Enter","Edit","Cell"],["Hover","Show any tip","Tool"]]})),function(){function e(){t.allow_auto_save&&(t.allow_auto_save=!1,t.file_is_loaded&&t.page_loaded&&t.has_unsaved_changes&&(console.log("try save"),re.file_save()))}s("blur",e,window),s("beforeunload",e,window),s("pagehide",e,window),s("visibilitychange",e,document),t.page_loaded=!0}(),ke()):te(e.unsupported_browser)}),window);let be=function(e){const t=document.createElement("span");e&&(t.style.fontSize=e);t.style.position="fixed",t.style.visibility="hidden",t.style.whiteSpace="nowrap",t.textContent="0",document.body.appendChild(t);const n=t.offsetWidth;return document.body.removeChild(t),n}(),ve=15;function ke(){!function(e){e.style.width="auto";const t=e.getBoundingClientRect().width,n=e.parentNode.clientWidth,o=be;let l=Math.round(t/o)*o;l>n&&(l=Math.floor(n/o)*o),l!==t&&(e.style.width=l+"px")}(e.db_table)}!function(e,t,n){let o;const l=()=>{const o=Math.round(e.scrollTop/t)*t,l=Math.round(e.scrollLeft/n)*n;e.scrollTo({top:o,left:l,behavior:"smooth"})};e.addEventListener("scroll",(()=>{clearTimeout(o),o=setTimeout((()=>{l()}),100)})),e.addEventListener("wheel",(t=>{t.preventDefault();const n=t.deltaY,r=t.deltaX;e.scrollTop+=n,e.scrollLeft+=r,clearTimeout(o),o=setTimeout((()=>{l()}),100)}))}(e.table_holder,ve,be),s("click",(()=>{e.table_holder.scrollTop=0}),e.scroll_to_top),s("scroll",(()=>{e.table_holder.scrollTop>0&&e.scroll_to_top.classList.contains("hide")&&te(e.scroll_to_top),0!=e.table_holder.scrollTop||e.scroll_to_top.classList.contains("hide")||ee(e.scroll_to_top)}),e.table_holder),window.addEventListener("resize",ke)})();</script></body></html>